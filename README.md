# Using Sass to workaround the mobile first IE8 view issue

## Introduction
When following the responsive, mobile first methodology, there's always an issue of how to support those browsers which don't have media query support, such as IE8. Some advocate serving up a modified version of the mobile view to such browsers, or a completely separate set of styles, adding another HTTP request and more to the page weight. While others advocate the use of JavaScript polyfills, such as [respond.js](https://github.com/scottjehl/Respond) to emulate media queries. The latter goes some way to solving this issue, but also raises a few of its own, notably performance and the reliance on JavaScript.

### An alternative approach

My approach utilises Sass mixins, named, modular media queries and conditional comments so you can continue building mobile first as you normally would, while also allowing you to choose a specific view to fallback to for &lt;=IE8 and other non-supporting browsers.

For this example I will be discussing IE8 and below.

### Usage

Carry on building mobile first, but when you reach for the media queries, instead of using the CSS3 `@media only screen and (...)` expressions, you `@include` the Sass `media-query` mixin below:

```scss
@include media-query( wide ){
	width: 25%;
};
```

The key factor of what makes this work is its reliance on *predefined* media queries. Normally you would use media queries with explicit properties, such as `@media only screen and (min-width 320px)...`. Instead, we are using named media queries, stored in a "linked list" within a Sass variable to include predefined media queries:

``` scss
$media-query-ids: narrow, medium, wide, superwide;
$media-queries: "only screen and (max-width: 320px)",
		"only screen and (min-width: 600px)",
		"only screen and (min-width: 960px)",
		"only screen and (min-width: 1280px)";
```

A handy helper function then picks the right media query for us. 

``` scss
@function get-item-by-name( $name, $names-list, $items ){
	@return #{ nth( $items, index( $names-list, $name ) ) };
}
```

*Note: Incidentally, this technique is also helpful for specifying font stacks by name.*

The *media-query* mixin that takes care of the rest is as follows.

``` scss
// @media-query
// $breakpoint (string) Breakpoint ID
// $include (boolean) Flag to include @content
@mixin media-query( $breakpoint, $include: true ){
	$media-query : get-item-by-name( $breakpoint, $media-query-ids, $media-queries );
	@if $supports-mq {
		@media #{ $media-query } { @content; };
	}
	@else {
		@if $breakpoint == $default-breakpoint {
			@if $include {
				@content;
			}
		}
	}
}
```

It takes two parameters, the first is the `breakpoint` (string) param. *Note: this param name is going to change as it self-limiting and misleading in that it only describes breakpoints, and isn't inclusive of device-pixel queries and other such expressions)*. The second is the `include` (boolean) param. This is set to `true` by default but when set to `false` doens't include `@content` for non-mq supporting browsers that match the default view.

So what we can do is have two separate Sass stylesheet:

In this example, in my page we include two main stylesheets (for the sake of brevity I'm keeping things simple): `ie.css` (for IE) and `main.css` (for those that support media queries). 

These are generated by Sass from `ie.scss` and `main.scss`. The thing that makes these works is the `$supports-mq` flag and the `$default-breakpoint`, which is set to `true` for `main.scss` and `false` for `ie.scss`.

`_styles.css` is just my way of keeping things DRY but you could include all your `@imports` directly within each file.

**ie.scss**
```
$supports-mq: false;
$default-breakpoint: wide;

@import "_styles";
```

**base.scss**
```
$supports-mq: true;

@import "_styles";
```

We then include these using IE conditional comments to serve the right CSS for the browser. IE8 ignores main.css and just gets ie.css:

``` html
...
<!--[if gt IE 8]> <!-- -->
<link rel="stylesheet" href="css/main.css">
<!-- <![endif]-->
<!--[if lt IE 9]>
<link rel="stylesheet" href="css/ie.css">
<![endif]-->
...

```

## Further example of predefined media queries:

``` scss
.col{
	/* My Mobile first styles*/
	background: #000;
	color: #fff;
	font-weight: bold;
	padding: 10px;
	
	@include media-query( wide ){
		float: left;
		padding: 10px;
		width: 25%;
	};
	@include media-query( superwide ){
		float: left;
		width: 12.5%;
	};
}
```

#### Credits
By Justin Perry, 2013
